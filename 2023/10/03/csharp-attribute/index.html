<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="每過一段時間就會忘記C#的 &lt;code&gt;Attribute&lt;/code&gt;, 今天又看了一次, 記錄一下. "><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>C# Attribute | ITHelp</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 6.3.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-time">2023-10-03</div></div></div><div class="container post-header"><h1>C# Attribute</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#C-%E7%A8%8B%E5%BC%8F%E7%A2%BC%E4%B8%AD-%E9%A1%9E%E5%88%A5%E4%B8%8A%E9%9D%A2%E6%9C%89%E4%B8%80%E5%80%8B%E7%94%A8%E4%B8%AD%E6%8B%AC%E8%99%9F%E5%8C%85%E4%BD%8F%E7%9A%84%E6%9D%B1%E8%A5%BF-ex-Obselete-%E6%88%96%E6%98%AF-Conditional-%E2%80%9CDEBUG%E2%80%9D-%E7%AD%89-%E9%80%99%E6%98%AF%E4%BB%80%E9%BA%BC"><span class="toc-number">1.</span> <span class="toc-text">C#程式碼中, 類別上面有一個用中括號包住的東西, ex: [Obselete] 或是 [Conditional(“DEBUG”)] 等, 這是什麼 ?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%8E%E9%BA%BC%E4%BD%BF%E7%94%A8Attribute%E5%91%A2"><span class="toc-number">2.</span> <span class="toc-text">怎麼使用Attribute呢?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%84%E6%9C%89%E5%85%B6%E4%BB%96%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%97%8E"><span class="toc-number">3.</span> <span class="toc-text">還有其他的使用方法嗎?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%87%AA%E5%AE%9A%E7%BE%A9Attribute"><span class="toc-number">4.</span> <span class="toc-text">如何自定義Attribute?</span></a></li></ol></details></div><div class="container post-content"><p>每過一段時間就會忘記C#的 <code>Attribute</code>, 今天又看了一次, 記錄一下. </p>
<p>本文主要參考自 <a target="_blank" rel="noopener" href="https://www.shouce.ren/api/view/a/7434">手冊網-C#特性</a>.</p>
<h2 id="C-程式碼中-類別上面有一個用中括號包住的東西-ex-Obselete-或是-Conditional-“DEBUG”-等-這是什麼"><a href="#C-程式碼中-類別上面有一個用中括號包住的東西-ex-Obselete-或是-Conditional-“DEBUG”-等-這是什麼" class="headerlink" title="C#程式碼中, 類別上面有一個用中括號包住的東西, ex: [Obselete] 或是 [Conditional(“DEBUG”)] 等, 這是什麼 ?"></a>C#程式碼中, 類別上面有一個用中括號包住的東西, ex: [Obselete] 或是 [Conditional(“DEBUG”)] 等, 這是什麼 ?</h2><p>在C#程式碼中看到出現中括號 類似 <code>[Obselete]</code> 之類的, 主要放在 <code>class</code>, 或 <code>method</code> 或 <code>struct</code> 等…的上面.那個就是Attribute.</p>
<h2 id="怎麼使用Attribute呢"><a href="#怎麼使用Attribute呢" class="headerlink" title="怎麼使用Attribute呢?"></a>怎麼使用Attribute呢?</h2><p>最簡單的使用方法可以在某個Method上方,添加 <code>[Obsolete]</code>, 這樣在IDE裡撰寫程式碼的時候, 會提示<code>xxx is Obsolete</code>.表示這個方法已經被棄用. 如果想要提示更多訊息,可以傳參數,改寫成 <code>[Obsolete(&quot;Do not use this method.&quot;)]</code>.如果想更進一步不允許使用這個方法,可以再傳入error&#x3D;true,寫成 <code>[Obsolete(&quot;Do not use this method.&quot;, true)]</code>,這樣一來,建置時有發現使用這個方法,會直接報錯,編譯無法通過.</p>
<p><code>Hello.cs</code> 範例如下:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Hello</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Obsolete</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;No! This is old method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Obsolete(<span class="string">&quot;try others&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello2</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;No! No! This is also old method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Obsolete(<span class="string">&quot;try others again&quot;</span>, true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello3</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;No! No! No! You can&#x27;t call this method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SayHello</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Program.cs</code> 範例如下:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Hello hello = <span class="keyword">new</span> Hello();</span><br><span class="line"></span><br><span class="line">hello.SayHello();       <span class="comment">//warning</span></span><br><span class="line"></span><br><span class="line">hello.SayHello2();      <span class="comment">//warning</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//hello.SayHello3();    //Error</span></span><br></pre></td></tr></table></figure>

<h2 id="還有其他的使用方法嗎"><a href="#還有其他的使用方法嗎" class="headerlink" title="還有其他的使用方法嗎?"></a>還有其他的使用方法嗎?</h2><p>還有一種用法,在 method上方加上 <code>[Conditional(&quot;DEBUG&quot;)]</code>,這樣一來,該方法只有在Debug模式下才會執行,在Release模式是不會執行.</p>
<h2 id="如何自定義Attribute"><a href="#如何自定義Attribute" class="headerlink" title="如何自定義Attribute?"></a>如何自定義Attribute?</h2><ol>
<li><p>定義一個新的類別,並繼承 <code>System.Attribute</code></p>
</li>
<li></li>
</ol>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/lato-font/3.0.0/css/lato-font.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcdn.net/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>