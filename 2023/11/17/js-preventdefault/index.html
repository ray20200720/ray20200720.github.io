<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="專案上遇到一個常見的問題. 過兩週又忘記了,所以記錄一下,方便下次查看"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>OnKeyPress ENTER Reloads The Page | ITHelp</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 6.3.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-time">2023-11-17</div></div></div><div class="container post-header"><h1>OnKeyPress ENTER Reloads The Page</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-avoid-reload-the-page-after-ENTER"><span class="toc-number">1.</span> <span class="toc-text">How to avoid reload the page after ENTER</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Source-Code"><span class="toc-number">1.1.</span> <span class="toc-text">Source Code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#More-Info"><span class="toc-number">1.2.</span> <span class="toc-text">More Info :</span></a></li></ol></li></ol></details></div><div class="container post-content"><p>專案上遇到一個常見的問題. 過兩週又忘記了,所以記錄一下,方便下次查看</p>
<h2 id="How-to-avoid-reload-the-page-after-ENTER"><a href="#How-to-avoid-reload-the-page-after-ENTER" class="headerlink" title="How to avoid reload the page after ENTER"></a>How to avoid reload the page after ENTER</h2><h3 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h3><p>原始頁面 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtInput&quot;</span> <span class="attr">runat</span>=<span class="string">&quot;server&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%;&quot;</span> <span class="attr">onkeypress</span>=<span class="string">&quot;DoFilter(this.value.trim());&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">DoFilter</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">        <span class="comment">// doSomething();</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// doOtherThing();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>問題描述: </p>
<pre><code>當在文字框按下ENTER鍵時,整個頁面會reload,導致頁面上的數據會丟失.
</code></pre>
<p>解決方法: </p>
<pre><code>在 `onkeypress=&quot;DoFilter(this.value.trim());&quot;` 後面加上 `event.preventDefault();`
</code></pre>
<p>完整代碼:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtInput&quot;</span> <span class="attr">runat</span>=<span class="string">&quot;server&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%;&quot;</span> <span class="attr">onkeypress</span>=<span class="string">&quot;DoFilter(this.value.trim()); event.preventDefault();&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="More-Info"><a href="#More-Info" class="headerlink" title="More Info :"></a>More Info :</h3><ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12781308/onkeypress-enter-reloads-the-page">JavaScript For Of</a></li>
</ul>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/lato-font/3.0.0/css/lato-font.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcdn.net/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>